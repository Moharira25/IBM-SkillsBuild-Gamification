<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link th:href="@{/css/navbar.css}" rel="stylesheet"/>
    <link th:href="@{/css/trial.css}" rel="stylesheet" type="text/css"/>

</head>
<body>
<div class="container">
    <div th:replace="~{fragments/header :: header}"></div>

    <div class="card" th:each="t: ${trials}">
    <div class="card-content">
        <h3 th:text="${t.title}"></h3>
        <p ></p>
        <div class="description-box">
            <p th:text="${t.description}"></p>
        </div>
        <!--only displayed if the trial has something to be recommended-->
        <h3 th:if="${t.getRecommendedCourses().size() != 0}" class="about-language">Recommended Courses:</h3>
        <div class="recommended-course" th:each="c: ${t.getRecommendedCourses()}">
        <a th:href="@{c.link}">
        style="color: #525252" th:text="${c.title}"></a>
        </div>
        <div class="icons">
        <a th:if="${user.attempts > 0 && !t.isEnded()}" th:href="@{trials/quiz/{trialId}(trialId = ${trial.getId()})}">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="width: 1rem">
                <path stroke-linecap="round" stroke-linejoin="round" d="m5.25 4.5 7.5 7.5-7.5 7.5m6-15 7.5 7.5-7.5 7.5" />
            </svg>

            <span  th:text="'Start Trial'"></span>
        </a>
        <!--a lock icon next to the 'Start Trial' if attempts are 0-->
        <a th:if="${user.attempts < 0 || t.isEnded()}">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="width: 1rem">
                <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z" />
            </svg>

            <span th:text="'Start Trial'"></span>
        </a>

        <a>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="clock" style="width: 1rem">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
            </svg>
            <!--different text for when a trial is active and when it is ended-->
            <span th:if="${t.isEnded()}" th:text="'Ended'"></span>
            <span th:unless="${t.isEnded()}" th:text="${trial.timeRemaining()}"></span>
        </a>

        <a>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="participants" style="width: 1rem">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z" />
        </svg>
            <!--different text for when a trial is active and when it is ended-->
            <span th:unless="${t.isEnded()}" th:text="${t.participants} + ' participants so far!' "></span>
            <span th:if="${t.isEnded()}" th:text="${t.participants} + ' participants' "></span>
        </a>
            <!--display attempts left if the trial is still active-->
        <a th:if="${!t.isEnded()}">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="width: 1rem">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
            <span th:text="${user.attempts} + ' attempts left'"></span>
        </a>
            <!--display the link to the leaderboard when there is at least one participant-->
        <a th:if="${t.participants > 0}" th:href="@{/leaderboard/timeTrial/{trialId}(trialId = ${t.id})}">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6" style="width: 1rem">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5" />
            </svg>

            <span th:text="'Leaderboard'"></span>
        </a>
        </div>

        <div class="attempts" th:if="${oldTrials.size() != 0 && oldTrials != null}" th:each="ut, i: ${oldTrials}">
            <div th:if="${ut.timeTrial == t}" class="attempt">
                <!--user cannot access their previous attempts while the trial is still active-->
                <a th:if="${t.isEnded()}" th:text="'Attempt ' + ${i.index + 1}"></a>
                <a th:unless="${t.isEnded()}" th:href="@{/trials/{id}/Feedback(id = ${ut.getId()})}" th:text="'Attempt ' + ${i.index + 1}"></a>
                <div  class="score">
                    <p class="score-text" th:text="${ut.score} +'%'"></p>
                </div>
            </div>
        </div>
    </div>
    </div>
</div>
<script th:src="@{/js/sidebar.js}"></script>
<script th:src="@{/js/landing.js}"></script>
</body>
</html>